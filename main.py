import streamlit as st

# í•™ê³¼ë³„ ì´ëª¨ì§€ ë§¤í•‘ ì •ì˜ (ì§€ë‚œë²ˆ ì½”ë“œì— ëª‡ ê°€ì§€ ë” ì¶”ê°€í–ˆì–´ìš”!)
major_emojis = {
    "ê²½ì˜í•™ê³¼": "ğŸ’¼", "ì»´í“¨í„°ê³µí•™ê³¼": "ğŸ’»", "íšŒê³„í•™ê³¼": "ğŸ’°",
    "ê°„í˜¸í•™ê³¼": "ğŸ‘©â€âš•ï¸", "ìœ ì•„êµìœ¡ê³¼": "ğŸ§¸", "ì‚¬íšŒë³µì§€í•™ê³¼": "ğŸ¤",
    "ì‹¬ë¦¬í•™ê³¼": "ğŸ§ ", "êµìœ¡í•™ê³¼": "ğŸ", "ë¬¸ì˜ˆì°½ì‘í•™ê³¼": "âœï¸",
    "ì¸ê³µì§€ëŠ¥í•™ê³¼": "ğŸ¤–", "í†µê³„í•™ê³¼": "ğŸ“Š", "ê¸°ê³„ê³µí•™ê³¼": "âš™ï¸",
    "ê±´ì¶•í•™ê³¼": "ğŸ—ï¸", "ì²´ìœ¡í•™ê³¼": "ğŸƒâ€â™‚ï¸", "ë¯¸ìˆ í•™ê³¼": "ğŸ¨",
    "ë””ìì¸í•™ê³¼": "ğŸ–Œï¸", "ìŒì•…í•™ê³¼": "ğŸ¶", "ì² í•™ê³¼": "ğŸ¤”",
    "ìˆ˜í•™ê³¼": "â•", "ë¬¼ë¦¬í•™ê³¼": "âš›ï¸", "ìŠ¤í¬ì¸ ê²½ì˜í•™ê³¼": "ğŸ†",
    "ë§ˆì¼€íŒ…í•™ê³¼": "ğŸ“ˆ", "ê²½ì°°í–‰ì •í•™ê³¼": "ğŸ‘®â€â™€ï¸", "ì—°ê·¹ì˜í™”í•™ê³¼": "ğŸ­",
    "ê´€ê´‘ê²½ì˜í•™ê³¼": "âœˆï¸", "ì‹¤ìš©ìŒì•…ê³¼": "ğŸ¤", "ê´‘ê³ í™ë³´í•™ê³¼": "ğŸ“£",
    "ìƒë‹´í•™ê³¼": "ğŸ—£ï¸", "ì°½ì—…í•™ê³¼": "ğŸ’¡", "ì‹ ë¬¸ë°©ì†¡í•™ê³¼": "ğŸ“º",
    "ë²•í•™ê³¼": "âš–ï¸", "í–‰ì •í•™ê³¼": "ğŸ›ï¸", "ì™¸êµí•™ê³¼": "ğŸŒ",
    "êµ­ì–´êµ­ë¬¸í•™ê³¼": "ğŸ“š", "ì˜ì–´ì˜ë¬¸í•™ê³¼": "ğŸ‡¬ğŸ‡§", "ì—­ì‚¬í•™ê³¼": "ğŸ“œ",
    "í™”í•™ê³¼": "ğŸ§ª", "ìƒëª…ê³¼í•™ê³¼": "ğŸ§¬", "ì§€êµ¬ê³¼í•™ê³¼": "ğŸŒ",
    "ë„ì‹œê³µí•™ê³¼": "ğŸ™ï¸", "ì¡°ê²½í•™ê³¼": "ğŸŒ³", "í™˜ê²½ê³µí•™ê³¼": "ğŸŒ¿",
    "ì—ë„ˆì§€ê³µí•™ê³¼": "âš¡", "ì‹í’ˆì˜ì–‘í•™ê³¼": "ğŸ¥—", "ì˜í•™ê³¼": "ğŸ¥",
    "ìˆ˜ì˜í•™ê³¼": "ğŸ¾", "ì•½í•™ê³¼": "ğŸ’Š", "ê²½ì˜ì •ë³´í•™ê³¼": "ğŸ“Š"
}

# MBTI ìœ í˜•ë³„ ì¶”ì²œ í•™ê³¼ ì •ì˜ (ì˜ˆì‹œ)
# ì´ ë¶€ë¶„ì€ ê¹€í•˜ìœ¤ë‹˜ì´ ìƒê°í•˜ëŠ” MBTIì™€ í•™ê³¼ì˜ ì—°ê´€ì„±ì— ë”°ë¼ ììœ ë¡­ê²Œ ìˆ˜ì •í•˜ê³  ì¶”ê°€í•´ ë³´ì„¸ìš”!
mbti_major_recommendations = {
    "ISTJ": "ê²½ì˜í•™ê³¼, ì»´í“¨í„°ê³µí•™ê³¼, íšŒê³„í•™ê³¼ (ì‹¤ìš©ì ì´ê³  ì²´ê³„ì ì¸ ë¶„ì•¼)",
    "ISFJ": "ê°„í˜¸í•™ê³¼, ìœ ì•„êµìœ¡ê³¼, ì‚¬íšŒë³µì§€í•™ê³¼ (íƒ€ì¸ì„ ë•ê³  ëŒë³´ëŠ” ë¶„ì•¼)",
    "INFJ": "ì‹¬ë¦¬í•™ê³¼, êµìœ¡í•™ê³¼, ë¬¸ì˜ˆì°½ì‘í•™ê³¼ (í†µì°°ë ¥ê³¼ ì‚¬ëŒ ì´í•´)",
    "INTJ": "ì»´í“¨í„°ê³µí•™ê³¼, ì¸ê³µì§€ëŠ¥í•™ê³¼, í†µê³„í•™ê³¼ (ì „ëµì ì´ê³  ë¶„ì„ì ì¸ ë¶„ì•¼)",
    "ISTP": "ê¸°ê³„ê³µí•™ê³¼, ê±´ì¶•í•™ê³¼, ì²´ìœ¡í•™ê³¼ (ì‹¤ìš©ì ì´ê³  í™œë™ì ì¸ ë¶„ì•¼)",
    "ISFP": "ë¯¸ìˆ í•™ê³¼, ë””ìì¸í•™ê³¼, ìŒì•…í•™ê³¼ (ì˜ˆìˆ ì ì´ê³  ììœ ë¡œìš´ ë¶„ì•¼)",
    "INFP": "ë¬¸ì˜ˆì°½ì‘í•™ê³¼, ì² í•™ê³¼, ì‹¬ë¦¬í•™ê³¼ (ì´ìƒì ì´ê³  ì°½ì˜ì ì¸ ë¶„ì•¼)",
    "INTP": "ìˆ˜í•™ê³¼, ë¬¼ë¦¬í•™ê³¼, ì»´í“¨í„°ê³µí•™ê³¼ (ë…¼ë¦¬ì ì´ê³  ì´ë¡ ì ì¸ ë¶„ì•¼)",
    "ESTP": "ìŠ¤í¬ì¸ ê²½ì˜í•™ê³¼, ë§ˆì¼€íŒ…í•™ê³¼, ê²½ì°°í–‰ì •í•™ê³¼ (í™œë™ì ì´ê³  í˜„ì‹¤ì ì¸ ë¶„ì•¼)",
    "ESFP": "ì—°ê·¹ì˜í™”í•™ê³¼, ê´€ê´‘ê²½ì˜í•™ê³¼, ì‹¤ìš©ìŒì•…ê³¼ (ì‚¬êµì ì´ê³  ê²½í—˜ì„ ì¤‘ì‹œí•˜ëŠ” ë¶„ì•¼)",
    "ENFP": "ê´‘ê³ í™ë³´í•™ê³¼, ì‹¬ë¦¬í•™ê³¼, ìƒë‹´í•™ê³¼ (ì—´ì •ì ì´ê³  ê´€ê³„ ì§€í–¥ì ì¸ ë¶„ì•¼)",
    "ENTP": "ì°½ì—…í•™ê³¼, ì‹ ë¬¸ë°©ì†¡í•™ê³¼, ê²½ì˜í•™ê³¼ (ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ íƒêµ¬í•˜ëŠ” ë¶„ì•¼)",
    "ESTJ": "ê²½ì˜í•™ê³¼, ë²•í•™ê³¼, í–‰ì •í•™ê³¼ (ì²´ê³„ì ì´ê³  ë¦¬ë”ì‹­ì´ ìš”êµ¬ë˜ëŠ” ë¶„ì•¼)",
    "ESFJ": "ìœ ì•„êµìœ¡ê³¼, ê°„í˜¸í•™ê³¼, ì‚¬íšŒë³µì§€í•™ê³¼ (ì‚¬ëŒë“¤ê³¼ í•¨ê»˜í•˜ê³  í˜‘ë ¥í•˜ëŠ” ë¶„ì•¼)",
    "ENFJ": "êµìœ¡í•™ê³¼, ì™¸êµí•™ê³¼, ìƒë‹´í•™ê³¼ (íƒ€ì¸ì˜ ì„±ì¥ì„ ë•ê³  ì´ë„ëŠ” ë¶„ì•¼)",
    "ENTJ": "ê²½ì˜í•™ê³¼, ì •ì¹˜ì™¸êµí•™ê³¼, ë²•í•™ê³¼ (ì „ëµì ì´ê³  ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ëŠ” ë¶„ì•¼)"
}

st.set_page_config(
    page_title="ê¹€í•˜ìœ¤ë‹˜ì˜ MBTI í•™ê³¼ ì¶”ì²œ ì•±",
    page_icon="ğŸ“"
)

st.title("ğŸ“ ë‚˜ì˜ ì„±ê²©ì— ë”± ë§ëŠ” í•™ê³¼ëŠ”?")
st.write("MBTIì˜ 4ê°€ì§€ ì§€í‘œë¥¼ ì§ì ‘ ì„ íƒí•˜ì—¬ ë‚˜ì—ê²Œ ì–´ìš¸ë¦¬ëŠ” í•™ê³¼ë¥¼ ì°¾ì•„ë³´ì„¸ìš”!")
st.write("â— **ì´ ì¶”ì²œì€ ì°¸ê³ ìš©ì´ë©°, ê°œì¸ì˜ ì ì„±ê³¼ í¥ë¯¸ê°€ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤!**")

st.markdown("---")
st.subheader("1. ì—ë„ˆì§€ ë°©í–¥ (ì–´ë–¤ ê³³ì—ì„œ ì—ë„ˆì§€ë¥¼ ì–»ë‚˜ìš”?)")
selected_ei = st.radio(
    " ", # ë¼ë””ì˜¤ ë²„íŠ¼ ìœ„ ë¶ˆí•„ìš”í•œ ë ˆì´ë¸” ì œê±°
    ["E (ì™¸í–¥: ë„“ê³  í™œë™ì ì¸ ê´€ê³„ë¥¼ ì„ í˜¸)", "I (ë‚´í–¥: ê¹Šê³  ì‹ ì¤‘í•œ ê´€ê³„ë¥¼ ì„ í˜¸)"],
    index=None
)

st.subheader("2. ì¸ì‹ ê¸°ëŠ¥ (ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì •ë³´ë¥¼ ì¸ì§€í•˜ë‚˜ìš”?)")
selected_sn = st.radio(
    " ",
    ["S (ê°ê°: ì˜¤ê°ìœ¼ë¡œ ì‹¤ì œ ê²½í—˜ì„ ì¤‘ìš”ì‹œ)", "N (ì§ê´€: ì˜ê°ê³¼ ë¯¸ë˜ ê°€ëŠ¥ì„±ì„ ì¤‘ìš”ì‹œ)"],
    index=None
)

st.subheader("3. íŒë‹¨ ê¸°ëŠ¥ (ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ê²°ì •ì„ ë‚´ë¦¬ë‚˜ìš”?)")
selected_tf = st.radio(
    " ",
    ["T (ì‚¬ê³ : ë…¼ë¦¬ì ì´ê³  ë¶„ì„ì ìœ¼ë¡œ íŒë‹¨)", "F (ê°ì •: ì‚¬ëŒê³¼ì˜ ê´€ê³„, ê°€ì¹˜ë¥¼ ì¤‘ìš”ì‹œ íŒë‹¨)"],
    index=None
)

st.subheader("4. ìƒí™œ ì–‘ì‹ (ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì‚¶ì„ ê³„íší•˜ë‚˜ìš”?)")
selected_jp = st.radio(
    " ",
    ["J (íŒë‹¨: ì²´ê³„ì ì´ê³  ê³„íšì ìœ¼ë¡œ í–‰ë™)", "P (ì¸ì‹: ìœ ì—°í•˜ê³  ìƒí™©ì— ë§ì¶° í–‰ë™)"],
    index=None
)

st.markdown("---")

# ëª¨ë“  ì„ íƒì´ ì™„ë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸
if all([selected_ei, selected_sn, selected_tf, selected_jp]):
    # ì„ íƒëœ ê°’ì—ì„œ ì²« ê¸€ì(MBTI ì§€í‘œ)ë§Œ ì¶”ì¶œí•˜ì—¬ ì¡°í•©
    final_mbti = selected_ei[0] + selected_sn[0] + selected_tf[0] + selected_jp[0]

    # MBTI ì¶”ì²œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    if final_mbti in mbti_major_recommendations:
        full_recommendation_string = mbti_major_recommendations[final_mbti]
        
        # ì¶”ì²œ ë¬¸ìì—´ì„ í•™ê³¼ ë¦¬ìŠ¤íŠ¸ ë¶€ë¶„ê³¼ ì„¤ëª… ë¶€ë¶„ìœ¼ë¡œ ë¶„ë¦¬
        parts = full_recommendation_string.split('(')
        major_list_string = parts[0].strip()
        description_part = f"({parts[1]}" if len(parts) > 1 else ""

        # ê°œë³„ í•™ê³¼ ì´ë¦„ ì¶”ì¶œ ë° ì´ëª¨ì§€ ì¶”ê°€
        individual_majors = [m.strip() for m in major_list_string.split(',')]
        
        formatted_majors_with_emojis = []
        for major in individual_majors:
            emoji = major_emojis.get(major, "â“") # major_emojisì— ì—†ëŠ” í•™ê³¼ëŠ” '?'ë¡œ í‘œì‹œ
            formatted_majors_with_emojis.append(f"{emoji} {major}")
        
        # ì´ëª¨ì§€ê°€ ì¶”ê°€ëœ í•™ê³¼ ë¦¬ìŠ¤íŠ¸ë¥¼ í•˜ë‚˜ì˜ ë¬¸ìì—´ë¡œ ê²°í•©
        display_string = ", ".join(formatted_majors_with_emojis)
        
        st.markdown(f"### ğŸ‰ ë‹¹ì‹ ì˜ MBTIëŠ” **{final_mbti}** ì´êµ°ìš”!")
        st.markdown(f"**{final_mbti}** ìœ í˜•ì—ê²Œ ì¶”ì²œí•˜ëŠ” í•™ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:")
        st.info(f"**{display_string.strip()}**")
        
        # ì„¤ëª… ë¶€ë¶„ì€ ë”°ë¡œ í‘œì‹œ
        if description_part:
            st.markdown("---")
            clean_description = description_part.strip('() ')
            st.write(f"ğŸ’¡ **{final_mbti}** ìœ í˜•ì€ ì£¼ë¡œ **{clean_description}** íŠ¹ì„±ì„ ê°€ì§‘ë‹ˆë‹¤.")
        
        st.success("ğŸ˜Š ì§„ë¡œ íƒìƒ‰ì€ í¥ë¯¸ë¡œìš´ ì—¬ì •ì´ì—ìš”! ìì‹ ì˜ ê°•ì ê³¼ ê´€ì‹¬ì‚¬ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.")
    else:
        st.warning(f"ì•„ì§ **{final_mbti}** ìœ í˜•ì— ëŒ€í•œ ì¶”ì²œ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”!")
else:
    st.info("â¬†ï¸ ìœ„ 4ê°€ì§€ ì§ˆë¬¸ì— ëª¨ë‘ ë‹µë³€í•´ì£¼ì„¸ìš”! ğŸ˜Š")

st.markdown("---")
st.caption("ì§„ë¡œì— ëŒ€í•œ ê³ ë¯¼ì€ ì–¸ì œë“ ì§€ í•¨ê»˜ ë‚˜ëˆŒ ìˆ˜ ìˆì–´ìš”! í˜ë‚´ì„¸ìš”, ê¹€í•˜ìœ¤ë‹˜! ğŸ’ª")
